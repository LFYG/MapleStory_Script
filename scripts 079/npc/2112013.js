var qian = 20000000;
var status = 0;
var choice;
var scrolls = Array(2049100,2049000,2048013,2048012,2048011,2048010,2048009,2048008,2048007,2048006,2048005,2048004,2048003,2048002,2048001,2048000,2044905,2044904,2044903,2044902,2044901,2044900,2044810,2044809,2044808,2044807,2044806,2044805,2044804,2044803,2044802,2044801,2044800,2044708,2044707,2044706,2044705,2044704,2044702,2044701,2044700,2044608,2044607,2044606,2044605,2044604,2044602,2044601,2044600,2044508,2044507,2044506,2044505,2044504,2044502,2044501,2044500,2044414,2044413,2044412,2044411,2044410,2044408,2044407,2044406,2044405,2044404,2044402,2044401,2044400,2044314,2044313,2044312,2044311,2044310,2044308,2044307,2044306,2044305,2044304,2044302,2044301,2044300,2044214,2044213,2044212,2044211,2044210,2044208,2044207,2044206,2044205,2044204,2044202,2044201,2044200,2044114,2044113,2044112,2044111,2044110,2044108,2044107,2044106,2044105,2044104,2044102,2044101,2044100,2044014,2044013,2044012,2044011,2044010,2044008,2044007,2044006,2044005,2044004,2044002,2044001,2044000,2043808,2043807,2043806,2043805,2043804,2043802,2043801,2043800,2043708,2043707,2043706,2043705,2043704,2043702,2043701,2043700,2043308,2043307,2043306,2043305,2043304,2043302,2043301,2043300,2043214,2043213,2043212,2043211,2043210,2043208,2043207,2043206,2043205,2043204,2043202,2043201,2043200,2043114,2043113,2043112,2043111,2043110,2043108,2043107,2043106,2043105,2043104,2043102,2043101,2043100,2043019,2043018,2043017,2043016,2043015,2043013,2043012,2043011,2043010,2043009,2043008,2043007,2043006,2043005,2043004,2043002,2043001,2043000,2041212,2041211,2041062,2041061,2041060,2041059,2041058,2041057,2041056,2041055,2041054,2041053,2041052,2041051,2041050,2041049,2041048,2041047,2041046,2041045,2041044,2041043,2041042,2041041,2041040,2041039,2041038,2041037,2041036,2041035,2041034,2041033,2041032,2041031,2041030,2041029,2041028,2041027,2041026,2041023,2041022,2041021,2041020,2041019,2041018,2041017,2041016,2041015,2041014,2041013,2041012,2041011,2041010,2041009,2041008,2041007,2041006,2041005,2041004,2041003,2041002,2041001,2041000,2040933,2040932,2040931,2040930,2040929,2040928,2040927,2040926,2040925,2040924,2040923,2040922,2040921,2040920,2040919,2040918,2040917,2040916,2040915,2040914,2040912,2040911,2040910,2040909,2040908,2040907,2040906,2040905,2040904,2040902,2040901,2040900,2040825,2040824,2040823,2040822,2040821,2040820,2040819,2040818,2040817,2040816,2040815,2040814,2040813,2040812,2040811,2040810,2040809,2040808,2040805,2040804,2040803,2040802,2040801,2040800,2040727,2040723,2040722,2040721,2040720,2040719,2040718,2040717,2040716,2040715,2040714,2040713,2040712,2040708,2040707,2040706,2040705,2040704,2040703,2040702,2040701,2040700,2040627,2040626,2040625,2040624,2040623,2040622,2040621,2040620,2040619,2040618,2040617,2040616,2040615,2040614,2040613,2040612,2040611,2040610,2040609,2040608,2040607,2040606,2040605,2040604,2040602,2040601,2040600,2040534,2040533,2040532,2040531,2040530,2040529,2040528,2040527,2040526,2040525,2040524,2040523,2040522,2040521,2040520,2040519,2040518,2040517,2040516,2040515,2040514,2040513,2040512,2040511,2040510,2040509,2040508,2040507,2040505,2040504,2040503,2040502,2040501,2040500,2040427,2040426,2040425,2040424,2040423,2040422,2040421,2040420,2040419,2040418,2040417,2040416,2040415,2040414,2040413,2040412,2040411,2040410,2040409,2040408,2040407,2040406,2040405,2040404,2040402,2040401,2040400,2040328,2040327,2040326,2040325,2040324,2040323,2040322,2040321,2040320,2040319,2040318,2040317,2040316,2040315,2040314,2040313,2040312,2040311,2040310,2040309,2040308,2040307,2040306,2040305,2040304,2040303,2040302,2040301,2040300,2040209,2040208,2040207,2040206,2040205,2040204,2040203,2040202,2040201,2040200,2040109,2040108,2040107,2040106,2040105,2040104,2040103,2040102,2040101,2040100,2040031,2040030,2040029,2040028,2040027,2040026,2040025,2040024,2040023,2040022,2040021,2040020,2040019,2040018,2040017,2040016,2040015,2040014,2040013,2040012,2040011,2040010,2040009,2040008,2040005,2040004,2040003,2040002,2040001,2040000);
/*
* 
*/
function start() {
    status = -1;
    action(1, 0, 0);
}

function action(mode, type, selection) {
    if (mode == -1)
        cm.dispose();
    else {
        if (status == 0 && mode == 0) {
            cm.dispose();
            return;
        } else if (status >= 1 && mode == 0) {
            cm.sendOk("好吧，欢迎下次继续光临！.");
            cm.dispose();
            return;
        }
        if (mode == 1)
            status++;
        else
            status--;

        if (status == 0) {
            var choices = "\r\n以下是你可以选择的购买物品: ";
            for (var i = 0; i < scrolls.length; i++) {
                    choices += "\r\n#L" + i + "##v" + scrolls[i] + "##t" + scrolls[i] + "##l";
            }
            cm.sendSimple(""+cm.mxdmz()+"冒险岛卷轴商店#k ,你想买我们商店的物品么？？请选择吧，每个需要"+qian+" 冒险币.：." + choices);
      } else if (status == 1) {
           cm.sendGetText("请输入你要购买的数量.您当前拥有#b"+cm.getMeso()+"#k金币.");
            choice = selection;
        } else if (status == 2) {
       sm = cm.getText();
      mesos =qian*sm;
             cm.sendYesNo("你确定需要购买#v" + scrolls[choice] + "##t" + scrolls[choice] + "# "+sm+"件吗？这将花费你 "+mesos+" 冒险币！！" +"是否继续?");
            status1 = choice;
        } else if (status == 3) {
            if (cm.getMeso() >= mesos) {
                cm.gainMeso(-mesos);
                cm.gainItem(scrolls[status1], sm);
                cm.sendOk("谢谢你的光顾，你购买的物品已经放入你的背包！.");
                cm.dispose();
            } else {
                    cm.sendOk("抱歉，你没足够的钱！.");
                    cm.dispose();
              
            }
        }
    }
}
