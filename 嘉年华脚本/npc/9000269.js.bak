status = -1;
var head = "#fUI/UIWindow2.img/Quest/quest_info/summary_icon/summary#\r\n";
var icon = "#fUI/UIWindow2.img/QuestAlarm/BtQ/normal/0#";
var Star = "#fEffect/CharacterEff/1112904/2/1#";
/***************************************/
var cost = 800000;  //每次消耗的HyPay额度
var itemList = Array(
Array(3010824, 250, 1, 1), //水星椅子
Array(3010825, 250, 1, 1), //金星椅子
Array(3010826, 250, 1, 1), //地球椅子
Array(3010827, 250, 1, 1), //火星椅子
Array(3010828, 250, 1, 1), //木星椅子
Array(3010832, 250, 1, 1), //太阳椅子
Array(3010217, 250, 1, 1), //香橙果冻布丁
Array(3010829, 250, 1, 1), //土星椅子
Array(3010830, 250, 1, 1), //天王星椅子
Array(3015263, 250, 1, 1), //海王星椅子
Array(1003797, 100, 1, 3), //高贵战士头盔 - (无描述)
Array(1003798, 100, 1, 3), //高贵流丹维奇帽 - (无描述)
Array(1003799, 100, 1, 3), //高贵游侠贝雷帽 - (无描述)
Array(1003800, 100, 1, 3), //高贵刺客软帽 - (无描述)
Array(1003801, 100, 1, 3), //高贵流浪者帽 - (无描述)
Array(1042254, 100, 1, 3), //鹰眼战士盔甲 - (无描述)
Array(1042255, 100, 1, 3), //鹰眼丹维奇长袍 - (无描述)
Array(1042256, 100, 1, 3), //鹰眼游侠斗篷 - (无描述)
Array(1042257, 100, 1, 3), //鹰眼刺客衬衣 - (无描述)
Array(1042258, 100, 1, 3), //鹰眼流浪者外衣 - (无描述)
Array(1062165, 100, 1, 3), //魔术师战士短裤 - (无描述)
Array(1062166, 100, 1, 3), //魔术师丹维奇短裤 - (无描述)
Array(1062167, 100, 1, 3), //魔术师游侠短裤 - (无描述)
Array(1062168, 100, 1, 3), //魔术师刺客短裤 - (无描述)
Array(1062169, 100, 1, 3),  //魔术师流浪者短裤 - (无描述)
Array(2432069, 25, 1, 3),
Array(1102481, 25, 1, 3), // 暴君西亚戴斯披风 // (无描述)
Array(1102482, 25, 1, 3), // 暴君赫尔梅斯披风 // (无描述)
Array(1102483, 25, 1, 3), // 暴君凯伦披风 // (无描述)
Array(1102484, 20, 1, 3), // 暴君利卡昂披风 // (无描述)
Array(1102485, 50, 1, 3), // 暴君阿尔泰披风 // (无描述)
Array(1072743, 50, 1, 3), // 暴君西亚戴斯靴 // (无描述)
Array(1072744, 50, 1, 3), // 暴君赫尔梅斯靴 // (无描述)
Array(1072745, 50, 1, 3), // 暴君凯伦靴 // (无描述)
Array(1072746, 50, 1, 3), // 暴君利卡昂靴 // (无描述)
Array(1072747, 50, 1, 3), // 暴君阿尔泰靴 // (无描述)
Array(1132174, 50, 1, 3), // 暴君西亚戴斯腰带 // (无描述)
Array(1132175, 50, 1, 3), // 暴君赫尔梅斯腰带 // (无描述)
Array(1132176, 50, 1, 3), // 暴君凯伦腰带 // (无描述)
Array(1132177, 50, 1, 3),// 暴君利卡昂腰带 // (无描述)
Array(1132178, 50, 1, 3),// 暴君阿尔泰腰带 // (无描述)
Array(1082543, 50, 1, 3), // 暴君西亚戴斯手套 // (无描述)
Array(1082544, 50, 1, 3), // 暴君赫尔梅斯手套 // (无描述)
Array(1082545, 50, 1, 3), // 暴君凯伦手套 // (无描述)
Array(1082546, 50, 1, 3),// 暴君利卡昂手套 // (无描述)
Array(1082547, 50, 1, 3),// 暴君阿尔泰手套 // (无描述)
/*极真装备*/
Array(1032223, 150, 1, 3), // 最高级贝勒德耳环 // (无描述)
Array(1113075, 150, 1, 3), // 最高级贝勒德戒指 // (无描述)
Array(1122267, 150, 1, 3), // 最高级贝勒德刻印吊坠 // (无描述)
Array(1132246, 150, 1, 3), // 最高级贝勒德刻印腰带 // (无描述)
Array(1032219, 150, 1, 3), // 遗忘之神话耳环 // (无描述)
Array(1022226, 150, 1, 3), // 独眼巨人之眼Lv.3 // (无描述)
Array(1102476, 150, 1, 3), // 诺巴西亚戴斯披风 // (无描述)
Array(1102477, 150, 1, 3), // 诺巴赫尔梅斯披风 // (无描述)
Array(1102478, 150, 1, 3), // 诺巴凯伦披风 // (无描述)
Array(1102479, 150, 1, 3), // 诺巴利卡昂披风 // (无描述)
Array(1102455, 150, 1, 3), // 诺巴阿尔泰披风 // (无描述)
Array(1072737, 150, 1, 3), // 诺巴西亚戴斯靴 // (无描述)
Array(1072738, 150, 1, 3), // 诺巴赫尔梅斯靴 // (无描述)
Array(1072739, 150, 1, 3), // 诺巴凯伦靴 // (无描述)
Array(1072740, 150, 1, 3), // 诺巴利卡昂靴 // (无描述)
Array(1072741, 150, 1, 3), // 诺巴阿尔泰靴 // (无描述)
Array(1132169, 150, 1, 3), // 诺巴西亚戴斯腰带 // (无描述)
Array(1132170, 150, 1, 3), // 诺巴赫尔梅斯腰带 // (无描述)
Array(1132171, 150, 1, 3), // 诺巴凯伦腰带 // (无描述)
Array(1132172, 150, 1, 3), // 诺巴利卡昂腰带 // (无描述)
Array(1132173, 150, 1, 3), // 诺巴阿尔泰腰带 // (无描述)
Array(1032219, 150, 1, 3), // 遗忘之神话耳环 // (无描述)
Array(1022226, 150, 1, 3), // 独眼巨人之眼Lv.3 // (无描述)
Array(1102476, 150, 1, 3), // 诺巴西亚戴斯披风 // (无描述)
Array(1102477, 150, 1, 3), // 诺巴赫尔梅斯披风 // (无描述)
Array(1102478, 150, 1, 3), // 诺巴凯伦披风 // (无描述)
Array(1102479, 150, 1, 3), // 诺巴利卡昂披风 // (无描述)
Array(1102455, 150, 1, 3), // 诺巴阿尔泰披风 // (无描述)
Array(1072737, 150, 1, 3), // 诺巴西亚戴斯靴 // (无描述)
Array(1072738, 150, 1, 3), // 诺巴赫尔梅斯靴 // (无描述)
Array(1072739, 150, 1, 3), // 诺巴凯伦靴 // (无描述)
Array(1072740, 150, 1, 3), // 诺巴利卡昂靴 // (无描述)
Array(1072741, 150, 1, 3), // 诺巴阿尔泰靴 // (无描述)
Array(1132169, 150, 1, 3), // 诺巴西亚戴斯腰带 // (无描述)
Array(1132170, 150, 1, 3), // 诺巴赫尔梅斯腰带 // (无描述)
Array(1132171, 150, 1, 3), // 诺巴凯伦腰带 // (无描述)
Array(1132172, 150, 1, 3), // 诺巴利卡昂腰带 // (无描述)
Array(1132173, 150, 1, 3), // 诺巴阿尔泰腰带 // (无描述)
Array(1032219, 150, 1, 3), // 遗忘之神话耳环 // (无描述)
Array(1022226, 150, 1, 3), // 独眼巨人之眼Lv.3 // (无描述)
Array(1102476, 150, 1, 3), // 诺巴西亚戴斯披风 // (无描述)
Array(1102477, 150, 1, 3), // 诺巴赫尔梅斯披风 // (无描述)
Array(1102478, 150, 1, 3), // 诺巴凯伦披风 // (无描述)
Array(1102479, 150, 1, 3), // 诺巴利卡昂披风 // (无描述)
Array(1102455, 150, 1, 3), // 诺巴阿尔泰披风 // (无描述)
Array(1072737, 150, 1, 3), // 诺巴西亚戴斯靴 // (无描述)
Array(1072738, 150, 1, 3), // 诺巴赫尔梅斯靴 // (无描述)
Array(1072739, 150, 1, 3), // 诺巴凯伦靴 // (无描述)
Array(1072740, 150, 1, 3), // 诺巴利卡昂靴 // (无描述)
Array(1072741, 150, 1, 3), // 诺巴阿尔泰靴 // (无描述)
Array(1132169, 150, 1, 3), // 诺巴西亚戴斯腰带 // (无描述)
Array(1132170, 150, 1, 3), // 诺巴赫尔梅斯腰带 // (无描述)
Array(1132171, 150, 1, 3), // 诺巴凯伦腰带 // (无描述)
Array(1132172, 150, 1, 3), // 诺巴利卡昂腰带 // (无描述)
Array(1132173, 150, 1, 3), // 诺巴阿尔泰腰带 // (无描述)
/*160装备*/
Array(1012438, 150, 1, 3) // 漩涡文身 // (无描述)
);

var itemList2 = Array(
Array(1022211, 150, 1, 3), // 漩涡眼镜 // (无描述)
Array(1032224, 150, 1, 3), // 漩涡耳环 // (无描述)
Array(1122269, 150, 1, 3), // 漩涡吊坠 // (无描述)
Array(1132247, 150, 1, 3), // 漩涡腰带 // (无描述)
Array(1152160, 150, 1, 3), // 漩涡护肩 // (无描述)
Array(1003976, 150, 1, 3), // 漩涡帽子 // (无描述)
Array(1102623, 150, 1, 3), // 漩涡披风 // (无描述)
Array(1082556, 150, 1, 3), // 漩涡手套 // (无描述)
Array(1052669, 150, 1, 3), // 漩涡皇家外套 // (无描述)
Array(1072870, 150, 1, 3), // 漩涡鞋 // (无描述)
Array(1212089, 150, 1, 3), // 漩涡双头杖 // (无描述)
Array(1222084, 150, 1, 3), // 漩涡灵魂手铳 // (无描述)
Array(1232084, 150, 1, 3), // 漩涡恶魔剑 // (无描述)
Array(1242090, 150, 1, 3), // 漩涡锁链剑 // (无描述)
Array(1252033, 150, 1, 3), // 漩涡虎梳魔法棒 // (无描述)
Array(1302297, 150, 1, 3), // 漩涡剑 // (无描述)
Array(1312173, 150, 1, 3), // 漩涡斧 // (无描述)
Array(1322223, 150, 1, 3), // 漩涡锤 // (无描述)
Array(1332247, 150, 1, 3), // 漩涡匕首 // (无描述)
Array(1342090, 150, 1, 3), // 漩涡刀  // (无描述)
Array(1362109, 150, 1, 3), // 漩涡手杖 // (无描述)
Array(1372195, 150, 1, 3), // 漩涡短杖 // (无描述)
Array(1382231, 150, 1, 3), // 漩涡长杖 // (无描述)
Array(1402220, 150, 1, 3), // 漩涡双手剑 // (无描述)
Array(1412153, 150, 1, 3), // 漩涡双手战斧 // (无描述)
Array(1422158, 150, 1, 3), // 漩涡巨锤 // (无描述)
Array(1432187, 150, 1, 3), // 漩涡矛 // (无描述)
Array(1442242, 150, 1, 3), // 漩涡戟 // (无描述)
Array(1452226, 150, 1, 3), // 漩涡弓 // (无描述)
Array(1462213, 150, 1, 3), // 漩涡弩 // (无描述)
Array(1472235, 150, 1, 3), // 漩涡拳甲 // (无描述)
Array(1482189, 150, 1, 3), // 漩涡冲拳 // (无描述)
Array(1492199, 150, 1, 3), // 漩涡手铳 // (无描述)
Array(1522113, 150, 1, 3), // 漩涡双翼弩 // (无描述)
Array(1532118, 150, 1, 3), // 漩涡手炮 // (无描述)
Array(1542072, 150, 1, 3), // 漩涡武士之剑 // (无描述)
Array(1552072, 150, 1, 3), // 漩涡之风 // (无描述)
/* 150 武器 */
Array(1212063, 90, 1, 3), // 法弗纳魔力源泉杖 // (无描述)
Array(1222058, 90, 1, 3), // 法弗纳天使手铳 // (无描述)
Array(1232057, 90, 1, 3), // 法弗纳死亡使者 // (无描述)
Array(1242060, 90, 1, 3), // 法弗纳精神之刃 // (无描述)
Array(1242061, 90, 1, 3), // 法弗纳精神之刃 // (无描述)
Array(1252015, 90, 1, 3), // 法弗纳北极星魔法棒 // (无描述)
Array(1262016, 90, 1, 3), // 法弗纳ESP限制器 // (无描述)
Array(1302275, 90, 1, 3), // 法弗纳银槲之剑 // (无描述)
Array(1312153, 90, 1, 3), // 法弗纳双刃切肉斧 // (无描述)
Array(1322203, 90, 1, 3), // 法弗纳戈耳迪锤 // (无描述)
Array(1332225, 90, 1, 3), // 法弗纳大马士革剑 // (无描述)
Array(1342082, 90, 1, 3), // 法弗纳急速之刃 // (无描述)
Array(1362090, 90, 1, 3), // 法弗纳洞察手杖 // (无描述)
Array(1372177, 90, 1, 3), // 法弗纳魔力夺取者 // (无描述)
Array(1382208, 90, 1, 3), // 法弗纳魔冠之杖 // (无描述)
Array(1402196, 90, 1, 3), // 法弗纳忏悔之剑 // (无描述)
Array(1412135, 90, 1, 3), // 法弗纳战斗切肉斧 // (无描述)
Array(1422140, 90, 1, 3), // 法弗纳闪电锤 // (无描述)
Array(1432167, 90, 1, 3), // 法弗纳贯雷枪 // (无描述)
Array(1442223, 90, 1, 3), // 法弗纳半月宽刃斧 // (无描述)
Array(1452205, 90, 1, 3), // 法弗纳追风者 // (无描述)
Array(1462193, 90, 1, 3), // 法弗纳风翼弩 // (无描述)
Array(1472214, 90, 1, 3), // 法弗纳危险之手 // (无描述)
Array(1482168, 90, 1, 3), // 法弗纳巨狼之爪 // (无描述)
Array(1492179, 90, 1, 3), // 法弗纳左轮枪 // (无描述)
Array(1522094, 90, 1, 3), // 法弗纳双风翼弩 // (无描述)
Array(1532098, 90, 1, 3), // 法弗纳荣耀炮 // (无描述)
Array(1542063, 90, 1, 3), // 法弗纳皇刀正宗 // (无描述)
Array(1552063, 90, 1, 3) // 法弗纳煌扇蓝姬 // (无描述)
);
function start() {
    action(1, 0, 0);
}

function action(mode, type, selection) {
    if (mode == 1) {
        status++;
    } else {
        if (status == 0) {
            cm.sendOk("不想使用吗？…我的肚子里有各类#b奇特座椅或卷轴、装备、新奇道具#k哦！");
            cm.dispose();
        }
        status--;

    }
    if (status == 0) {
        var txt = Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + "\r\n";
        txt += "#d想抽奖吗？精品道具入谁家？我这里有150-160不等高级道具\r\n";
        txt += "魔方 卷轴 奇特座椅 限量时装 等新奇道具 [ #r还在等待吗#d ]\r\n\r\n#k";
        txt += "#d[ #r#h ##d ] 玩家点卷：#r" + cm.getHyPay(1) + "　#b[ 80W点卷抽一回 ]\r\n#k";
        txt += "#b#L0#开始抽奖 [ 可抽 #r" + parseInt(cm.getHyPay(1) / cost) + "#b 次 ]\t\t#r☆奖品图鉴如下☆#l#k\r\n\r\n";
        txt += Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + Star + "\r\n";
        txt += "#i1003797##i1003798##i1003799##i1003800##i1003801##i1042254##i1042255##i1042256##i1042257##i1042258##i1062165##i1102481##i1102482##i1102483##i1102484##i1102485##i1072743##i1072744##i1072745##i1072746##i1072747##i1222058##i1232057##i1242060##i1242061##i1302275##i1312153##i1322203##i1332225##i1342082##i1362090##i1372177##i1382208##i1402196#";
        cm.sendSimple(txt);
    } else if (status == 1) {
        if (selection == 0) {
            if (cm.getPlayer().getCSPoints(1) < cost) {
                cm.sendOk("你好像没有" + cost + "点卷");
                cm.dispose();
                return;
            }
            var chance = Math.floor(Math.random() * 500);
            var finalitem = Array();
			if (chance >250){
				cm.sendOk("很遗憾未中奖");
				cm.dispose();
				return;
			}
        for (var i = 0; i < itemList.length; i++) {
            if (itemList[i][1] >= chance) {
                finalitem.push(itemList[i]);
            }
        }
        for (var i = 0; i < itemList2.length; i++) {
            if (itemList2[i][1] >= chance) {
                finalitem.push(itemList2[i]);
            }
        }
        if (finalitem.length != 0) {
                var item;
                var random = new java.util.Random();
                var finalchance = random.nextInt(finalitem.length);
                var itemId = finalitem[finalchance][0];
                var quantity = finalitem[finalchance][2];
                var notice = finalitem[finalchance][3];
                item = cm.gainGachaponItem(itemId, quantity, "[点卷抽奖宝箱]", notice);
                if (item != -1) {
                    cm.gainNX(1.-cost);
                    cm.sendOk("恭喜你获得了 #b#z" + item + "##k " + quantity + "个。并扣除800000点劵");
                } else {
                    cm.sendOk("请你确认在背包的装备，消耗，其他窗口中是否有一格以上的空间。");
                }
                cm.safeDispose();
            } else {
                cm.sendOk("今天的运气可真差，什么都没有拿到");
				//cm.gainNX(1.-cost);
                cm.safeDispose();
            }
        }
    }
}

